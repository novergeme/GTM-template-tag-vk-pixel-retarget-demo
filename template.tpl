___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1.4,
  "securityGroups": [],
  "displayName": "VK Pixel\u0026Retarget DEMO",
  "categories": [
    "REMARKETING",
    "ANALYTICS",
    "CONVERSIONS"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "by Novergeme",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKtGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTA3LTA3VDAxOjUzOjA3KzAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyLTA3LTE0VDIyOjE5OjI0KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wNy0xNFQyMjoxOToyNCswMzowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTcwYTc1YWEtNDVhMi0yMTQzLTk0MzgtNDI5NTIzYjk5NGMyIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NDQzZDI1MDEtOWNkMC1mNjQyLWE2MmEtYmIzYzM5YjU5YjUwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NGVkNmQ3YmUtYjgxMy1hNTQyLTg2OTAtNTlmOTI4ZmRlNGUzIiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlhSZXNvbHV0aW9uPSI3MjAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSI2NTUzNSIgZXhpZjpQaXhlbFhEaW1lbnNpb249IjEyOCIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjEyOCI+IDxwaG90b3Nob3A6VGV4dExheWVycz4gPHJkZjpCYWc+IDxyZGY6bGkgcGhvdG9zaG9wOkxheWVyTmFtZT0iLiIgcGhvdG9zaG9wOkxheWVyVGV4dD0iLiIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPkJCRUY1MUJEMjgyRjM2QzUzOThFRkE2OTU3OTBCNjI3PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGVkNmQ3YmUtYjgxMy1hNTQyLTg2OTAtNTlmOTI4ZmRlNGUzIiBzdEV2dDp3aGVuPSIyMDIyLTA3LTA3VDAxOjUzOjA3KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmU0ZTRlOWY0LTUzOWEtOGI0MC1iNWQzLTFhYjBiMWM0ODdkZSIgc3RFdnQ6d2hlbj0iMjAyMi0wNy0xNFQyMjoxOToyNCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NzBhNzVhYS00NWEyLTIxNDMtOTQzOC00Mjk1MjNiOTk0YzIiIHN0RXZ0OndoZW49IjIwMjItMDctMTRUMjI6MTk6MjQrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ZTRlNGU5ZjQtNTM5YS04YjQwLWI1ZDMtMWFiMGIxYzQ4N2RlIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OWNjN2I3NjUtMWY4ZS1kMzQ3LTljYmItY2NhOTQ5MTc2ZDMzIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6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\u003d"
  },
  "description": "Полный функционал VK для простой настройки Pixel и Dynamic Retargeting. Настройка динамического ретаргетинга доступна только в Full версии. Подробнее на сайте https://novergeme.ru/vk_pixel_retarget",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "message",
    "displayName": "Что доступно в DEMO?",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "LABEL",
        "name": "labelAbout",
        "displayName": "\u003cstrong\u003eВам доступны настройки «Конверсии (Goal)» и «Сбор аудиторий (Audience)», а «Динамический ретаргетинг (ProductEvent)» доступен только в Full версии\u003c/strong\u003e"
      },
      {
        "type": "LABEL",
        "name": "labelDot",
        "displayName": "•"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "pixelID",
    "displayName": "Укажите ID VK пикселя",
    "simpleValueType": true,
    "valueHint": "VK-RTRG-XXXXXXX-xXXxx",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "selectMode",
    "displayName": "Выберите что хотите настроить",
    "radioItems": [
      {
        "value": 0,
        "displayValue": "Конверсии (Goal)"
      },
      {
        "value": 2,
        "displayValue": "Сбор аудиторий (Audience)"
      },
      {
        "value": 1,
        "displayValue": "Динамический ретаргетинг (ProductEvent)"
      }
    ],
    "simpleValueType": true,
    "help": "В VK есть 3 типа событий предназначенных для разных целей:\n\n1. Конверсии (Goal) - это события для оптимизации рекламных объявлений. (стоит настраивать только для ЦА пользователей ПК и ноутбуков, т.к. в статистике будут учитываться только авторизованные пользователи VK в браузере)\n\n2. Сбор аудиторий (Audience) - события для распределения пользователей по созданным в VK аудиториям для дальнейшего ретаргета.\n\n3. Динамический ретаргетинг (ProductEvent) - продуктовые события, которые передают в VK информацию о товарах с вашего интернет-магазина или сайта услуг для настройки динамического ретаргетинга. (Требуется настройка Price-list)."
  },
  {
    "type": "SELECT",
    "name": "setEventGoal",
    "displayName": "Название события пикселя",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "add_to_cart",
        "displayValue": "add_to_cart – добавление товара в корзину"
      },
      {
        "value": "add_payment_info",
        "displayValue": "add_payment_info – введение платежной информации"
      },
      {
        "value": "purchase",
        "displayValue": "purchase – совершение покупки"
      },
      {
        "value": "add_to_wishlist",
        "displayValue": "add_to_wishlist – добавление товара в список желаний"
      },
      {
        "value": "page_view",
        "displayValue": "page_view — Посещение страницы"
      },
      {
        "value": "view_content",
        "displayValue": "view_content — просмотр контента"
      },
      {
        "value": "customize_product",
        "displayValue": "customize_product — установка параметров товара, например цвет, размер и тд."
      },
      {
        "value": "initiate_checkout",
        "displayValue": "initiate_checkout — начало оформления заказа"
      },
      {
        "value": "lead",
        "displayValue": "lead — отправка лида, заполненная форма"
      },
      {
        "value": "contact",
        "displayValue": "contact — клик по телефону, мессенджеру, email"
      },
      {
        "value": "complete_registration",
        "displayValue": "complete_registration — завершенная регистрация"
      },
      {
        "value": "submit_application",
        "displayValue": "submit_application — отправка заявки на услугу, товар, программу"
      },
      {
        "value": "subscribe",
        "displayValue": "subscribe — подписался на рассылку, новости и продукт по подписке"
      },
      {
        "value": "search",
        "displayValue": "search — использование поиска, например, по статьям или товарам на сайте"
      },
      {
        "value": "start_trial",
        "displayValue": "start_trial — начало использования бесплатной/пробной версии"
      },
      {
        "value": "find_location",
        "displayValue": "find_location — открытие карты, просмотр местоположения"
      },
      {
        "value": "donate",
        "displayValue": "donate — пожертвование средств"
      },
      {
        "value": "conversion",
        "displayValue": "conversion — любое действие, например скролл по сайту"
      },
      {
        "value": "schedule",
        "displayValue": "schedule — запись на приём в одном из ваших магазинов или офисов"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 0,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "checkValue",
    "checkboxText": "Указать ценность конверсии value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 0,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "value",
    "displayName": "Укажите переменную value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkValue",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Укажите ценность конверсии. Это может быть переменная данных dataLayer, например: ecommerce.detail.products.0.price",
    "valueHint": "{{value}}"
  },
  {
    "type": "CHECKBOX",
    "name": "valueAuto",
    "checkboxText": "Посчитать value из dataLayer",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkValue",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Укажите в поле выше переменную данных dataLayer, например ecommerce.checkout.products и поставьте эту галочку чтобы сумма всех товаров посчиталась автоматически. Внимание! В dataLayer должны быть параметры price и quantity, так как именно эти параметры перемножаются для вычисления результата."
  },
  {
    "type": "SELECT",
    "name": "setProductEvent",
    "displayName": "Название продуктового события",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "add_to_cart",
        "displayValue": "add_to_cart – добавление товара в корзину (PX)"
      },
      {
        "value": "add_payment_info",
        "displayValue": "add_payment_info – введение платежной информации (PX)"
      },
      {
        "value": "purchase",
        "displayValue": "purchase – совершение покупки (PX)"
      },
      {
        "value": "add_to_wishlist",
        "displayValue": "add_to_wishlist – добавление товара в список желаний (PX)"
      },
      {
        "value": "view_home",
        "displayValue": "view_home – посещение главной страницы"
      },
      {
        "value": "view_other",
        "displayValue": "view_other – посещение любых других страниц"
      },
      {
        "value": "view_category",
        "displayValue": "view_category – посещение страницы категорий каталога"
      },
      {
        "value": "view_product",
        "displayValue": "view_product – посещение карточки товара"
      },
      {
        "value": "init_checkout",
        "displayValue": "init_checkout – начало покупки"
      },
      {
        "value": "remove_from_wishlist",
        "displayValue": "remove_from_wishlist – удаление товара из списка желаний"
      },
      {
        "value": "remove_from_cart",
        "displayValue": "remove_from_cart – удаление товара из корзины"
      },
      {
        "value": "view_search",
        "displayValue": "view_search – посещение страницы поиска"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "idPriceList",
    "displayName": "Укажите ID price-list",
    "simpleValueType": true,
    "valueHint": "123456",
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "help": "Создайте в VK price-list, загрузите в него товары с вашего сайта и укажите в это поле id. (если у вас Auto price-list, то подайте в VK заявку на подключение динамического ретаргета чтобы у вас появилась возможность создать свой price-list т.к. Auto price-list не редактируется и не удаляется."
  },
  {
    "type": "CHECKBOX",
    "name": "checkDataLayer",
    "checkboxText": "Включить dataLayer",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "arrProducts",
    "displayName": "Источник параметров продукта",
    "simpleValueType": true,
    "valueHint": "{{dataLayer}}",
    "enablingConditions": [
      {
        "paramName": "checkDataLayer",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Если ваш сайт отправляет dataLayer с данными о товаре id, group_id, recommended_ids, price, price_old, то укажите переменную данных, которая имеет путь к массиву этих данных, например, это будет ecommerce.checkout.products или ecommerce.detail.products и т.п."
  },
  {
    "type": "LABEL",
    "name": "labelDotsStart",
    "displayName": "•••",
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "checkID",
    "checkboxText": "Ручная настройка id (ОБЯЗАТЕЛЬНЫЙ ПАРАМЕТР)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "help": "Если этот параметр есть в dataLayer, то НЕ ставьте галочку чтобы он считался из dataLayer. Поставьте галочку если хотите указать параметр вручную. Внимание! Если поставите галочку и оставите поле пустым, то этот параметр не будет передаваться, даже если он есть в dataLayer"
  },
  {
    "type": "TEXT",
    "name": "id",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkID",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "ID товара, который должен совпадать с ID товара в вашем price-list в VK. Внимание! Обязательный параметр.",
    "valueHint": "{{id}}"
  },
  {
    "type": "CHECKBOX",
    "name": "checkGroupID",
    "checkboxText": "Ручная настройка group_id",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "help": "Если этот параметр есть в dataLayer, то НЕ ставьте галочку чтобы он считался из dataLayer. Поставьте галочку если хотите указать параметр вручную. Внимание! Если поставите галочку и оставите поле пустым, то этот параметр не будет передаваться, даже если он есть в dataLayer"
  },
  {
    "type": "TEXT",
    "name": "group_id",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkGroupID",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueHint": "{{group_id}}",
    "help": "ID группы товаров. Стоит указывать если пользователь смотрит не конкретную модель, а все варианты какой-то модели. group_id должен совпадать с group_id товара в вашем price-list в VK."
  },
  {
    "type": "CHECKBOX",
    "name": "checkRecommendedIDs",
    "checkboxText": "Ручная настройка recommended_ids",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "help": "Если этот параметр есть в dataLayer, то НЕ ставьте галочку чтобы он считался из dataLayer. Поставьте галочку если хотите указать параметр вручную. Внимание! Если поставите галочку и оставите поле пустым, то этот параметр не будет передаваться, даже если он есть в dataLayer"
  },
  {
    "type": "TEXT",
    "name": "recommendedIDs",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkRecommendedIDs",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueHint": "{{recommended_ids}}",
    "help": "Это один или несколько ID рекомендованных товаров для конкретного товара или группы товаров, ID указываются через запятую, например: 234234,553532,939882. Внимание! максимальная длина одного id - 20 символов. recommended_ids должен совпадать с recommended_ids  товара в вашем price-list в VK."
  },
  {
    "type": "CHECKBOX",
    "name": "checkPrice",
    "checkboxText": "Ручная настройка price",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "help": "Если этот параметр есть в dataLayer, то НЕ ставьте галочку чтобы он считался из dataLayer. Поставьте галочку если хотите указать параметр вручную. Внимание! Если поставите галочку и оставите поле пустым, то этот параметр не будет передаваться, даже если он есть в dataLayer"
  },
  {
    "type": "TEXT",
    "name": "price",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkPrice",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueHint": "{{price}}",
    "help": "Цена конкретного товара или группы товаров."
  },
  {
    "type": "CHECKBOX",
    "name": "checkPriceOld",
    "checkboxText": "Ручная настройка price_old",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "help": "Если этот параметр есть в dataLayer, то НЕ ставьте галочку чтобы он считался из dataLayer. Поставьте галочку если хотите указать параметр вручную. Внимание! Если поставите галочку и оставите поле пустым, то этот параметр не будет передаваться, даже если он есть в dataLayer"
  },
  {
    "type": "TEXT",
    "name": "priceOld",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkPriceOld",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueHint": "{{price_old}}",
    "help": "Старая цена. Учитывается, если задано поле price"
  },
  {
    "type": "CHECKBOX",
    "name": "priceFrom",
    "checkboxText": "Включить price_from",
    "simpleValueType": true,
    "help": "Если поставили галочку, то поле price указывает цену \"от\". Учитывается, если задано поле price",
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "LABEL",
    "name": "lableDotsMiddle",
    "displayName": "•••",
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "checkCurrencyCode",
    "checkboxText": "Настроить currency_code",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "currencyCode",
    "displayName": "Укажите значение",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkCurrencyCode",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "defaultValue": "RUR",
    "help": "По умолчанию установлен рубль. Если хотите указать иную валюту, то уточните у поддержки VK правильность её написания"
  },
  {
    "type": "CHECKBOX",
    "name": "checkTotalPrice",
    "checkboxText": "Настроить total_price",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "RADIO",
    "name": "optionTotalPrice",
    "displayName": "Общая сумма товаров",
    "radioItems": [
      {
        "value": 0,
        "displayValue": "Авто. total_price"
      },
      {
        "value": 1,
        "displayValue": "Указать свой total_price"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkTotalPrice",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Если выбираете Авто. режим, то сумма посчитается автоматически перемножив price на quantity в указанном выше dataLayer (подходит для события init_checkout «Начало покупки»). Если выбираете указать своё значение, то для события purchase «Покупка» это может быть переменная данных с путём к общей сумме заказа, например ecommerce.purchase.actionField.revenue"
  },
  {
    "type": "TEXT",
    "name": "totalPrice",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "optionTotalPrice",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ],
    "valueHint": "{{total_price}}"
  },
  {
    "type": "CHECKBOX",
    "name": "checkCategoryIDs",
    "checkboxText": "Настроить category_ids",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "categoryIDs",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkCategoryIDs",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Укажите список категорий товаров, в том случае, когда конкретных товаров либо нет, либо хочется дополнительно охватить какую-то категорию полностью. Укажите ID категорий товаров через запятую, например: 72389,38232,99493... Или укажите переменную, которая будет включать ID категорий товаров через запятую",
    "valueHint": "72389,38232,99493"
  },
  {
    "type": "CHECKBOX",
    "name": "checkProductsRecommendedIDs",
    "checkboxText": "Настроить products_recommended_ids",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "productsRecommendedIDs",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkProductsRecommendedIDs",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Укажите список рекомендованных товаров, в том случае, когда конкретных товаров либо нет, либо хочется порекомендовать какие-то товары без привязки к конкретным товарам. Укажите ID рекомендованных товаров через запятую, например: 67987768,88837534,37383495... Или укажите переменную, которая будет включать ID рекомендованных товаров через запятую",
    "valueHint": "67987768,88837534,37383495"
  },
  {
    "type": "CHECKBOX",
    "name": "checkBusinessValue",
    "checkboxText": "Настроить business_value",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "businessValue",
    "displayName": "Укажите значение",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkBusinessValue",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Ценность события для бизнеса в условных единицах, от 1 до 1000000",
    "valueHint": "88"
  },
  {
    "type": "CHECKBOX",
    "name": "checkSearchString",
    "checkboxText": "Настроить search_string",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "search_string",
    "displayName": "Укажите переменную",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkSearchString",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Это фраза поискового запроса пользователя. В основном настраивается для события view_search",
    "valueHint": "{{search_string}}"
  },
  {
    "type": "LABEL",
    "name": "labelDotsEnd",
    "displayName": "•••",
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 1,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "otherParam",
    "checkboxText": "Настроить URL и Title (Hit)",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 0,
        "type": "NOT_EQUALS"
      }
    ],
    "help": "Рекомендуется указывать URL и Title для событий динамического ретаргета (ProductEvent). Также эти параметры могут использоваться как событие Hit (посещение страницы), но только если вы указали эти параметры и ничего больше для типа настройки Сбор аудиторий (Audience)"
  },
  {
    "type": "TEXT",
    "name": "metatagURL",
    "displayName": "Отправка URL страницы перехода",
    "simpleValueType": true,
    "help": "По умолчанию уже стоит стандартная переменная GTM. Но, вы также можете указать другую переменную, которая содержит URL страницы на которой произошло событие.",
    "defaultValue": "{{Page URL}}",
    "enablingConditions": [
      {
        "paramName": "otherParam",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "metatagTitle",
    "displayName": "Отправка названия страницы",
    "simpleValueType": true,
    "help": "Укажите переменную, которая содержит название страницы на которой произошло событие.",
    "enablingConditions": [
      {
        "paramName": "otherParam",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueHint": "{{metatag_title}}"
  },
  {
    "type": "CHECKBOX",
    "name": "checkEvent",
    "checkboxText": "Настроить сбор по event",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 2,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "event",
    "displayName": "Укажите кастомное событие",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkEvent",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueHint": "scroll75",
    "help": "Добавление пользователя в аудиторию по названию события. Например, вы можете указать название события scroll75, настроить этот тег на срабатывание по триггеру скролл по странице на 75%. И в аудитории VK указать правило по названию события scroll75"
  },
  {
    "type": "CHECKBOX",
    "name": "checkAudience",
    "checkboxText": "Настроить сбор по audience",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 2,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "audience",
    "displayName": "Укажите id аудитории",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkAudience",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Добавление пользователя в аудиторию VK по её id.",
    "valueHint": "12345678"
  },
  {
    "type": "CHECKBOX",
    "name": "checkDeviceID",
    "checkboxText": "Настроить сбор по device_id",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "selectMode",
        "paramValue": 2,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "deviceID",
    "displayName": "Укажите переменную генератора device_id",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "checkDeviceID",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Определение пользователя по идентификатору устройства device_id и добавлением в аудитории в соответствии с правилами аудитории",
    "valueHint": "{{device_id}}"
  },
  {
    "type": "GROUP",
    "name": "info",
    "displayName": "О проекте:",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "LABEL",
        "name": "instruction",
        "displayName": "Инструкция: https://youtube.com/playlist?list\u003dPLy7BYWCGI_atdK3qm9rbp2PNaAKfSGp0T"
      },
      {
        "type": "LABEL",
        "name": "developer",
        "displayName": "Разработчик: https://novergeme.ru/vk_pixel_retarget"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
log('data =', data);

const makeInteger = require('makeInteger');
const makeString = require('makeString');
const sendPixel =  require('sendPixel');
const JSON = require('JSON');
const setCookie = require('setCookie');

let productsPixel = [];
if(data.valueAuto){
   if(data.value !== undefined & data.value != undefined & data.value !== 'undefined' & data.value != 'undefined' & data.value !== null & data.value != null){
   productsPixel = data.value;
   }
  else{
   productsPixel = [{}];
  }
}

const pixel = {
      
totalPriceMathPixel: () => {
 var sum = 0; 
 const results = [];
   
 for (let i = 0; i < productsPixel.length; i++) {
     var price = makeString(productsPixel[i].price).split(',').join('.');
     var quantity = makeString(productsPixel[i].quantity).split(',').join('.');
     results.push(makeInteger(price) * makeInteger(quantity));
  }
   
    for (let i = 0; i < results.length; i++) {
     sum +=results[i];
  }
   
  return sum;
},
  
generateStartLink:() => {
    var metaTagUrl = "&metatag_url=" + data.metatagURL;
    var metaTagTitle = "&metatag_title=" + data.metatagTitle;
    var aud = "&audience=" + makeString(data.audience).split(' ').join('');
    var deviceUser = "&device_id=" + makeString(data.deviceID).split(' ').join('');
    var eventUser = "&event=" + makeString(data.event).split(' ').join('');
    var eventPixel = "&e=1&c=" + data.setEventGoal;
  
    var valuePixel = "&v=";
    if(data.valueAuto){
      valuePixel += pixel.totalPriceMathPixel();
    }
    else{
      var valuePixelCheck = makeString(data.value).split(',').join('.');
      valuePixel += makeInteger(valuePixelCheck * 100 / 100);
    }
  
    var startURL = 'https://vk.com/rtrg?p=' + data.pixelID;
  
    let setUserParam = [data.setEventGoal, data.value,
                        data.event, data.audience, data.deviceID,
                        data.metatagURL, data.metatagTitle];
  
    let urlParam = [eventPixel, valuePixel,
                    eventUser, aud, deviceUser,
                    metaTagUrl, metaTagTitle];

  
   for (let i = 0; i < setUserParam.length; i++) {
      if(setUserParam[i] != null)
     startURL += urlParam[i];
    }
  
  return startURL;
},
  
generateURLforPixel:() =>{
var finalUrl = pixel.generateStartLink();
sendPixel(finalUrl, data.gtmOnSuccess());
},  
  
generateURLforAudience:() =>{
var finalUrl = pixel.generateStartLink();
sendPixel(finalUrl, data.gtmOnSuccess());
},
      
    count: 0
};

if(data.selectMode === 0)
pixel.generateURLforPixel();
if(data.selectMode === 2)
pixel.generateURLforAudience();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 07.07.2022, 13:05:04 gFB5vBq8c9Nt


